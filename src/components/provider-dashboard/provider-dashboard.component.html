<div class="space-y-8 animate-fade-in">
  <div>
    <h1 class="text-4xl font-bold text-slate-900">Dashboard</h1>
    <p class="mt-1 text-lg text-slate-600">Manage your business profile, services, and availability.</p>
  </div>

  @if (editableProvider(); as provider) {
    <!-- Tab Navigation -->
    <div class="border-b border-slate-200">
      <nav class="-mb-px flex space-x-6" aria-label="Tabs">
        <button (click)="selectTab('profile')" [class]="'px-1 py-4 text-sm font-medium border-b-2 ' + (activeTab() === 'profile' ? 'border-teal-500 text-teal-600' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300')">Profile</button>
        <button (click)="selectTab('services')" [class]="'px-1 py-4 text-sm font-medium border-b-2 ' + (activeTab() === 'services' ? 'border-teal-500 text-teal-600' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300')">Services</button>
        <button (click)="selectTab('workers')" [class]="'px-1 py-4 text-sm font-medium border-b-2 ' + (activeTab() === 'workers' ? 'border-teal-500 text-teal-600' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300')">Workers</button>
        <button (click)="selectTab('availability')" [class]="'px-1 py-4 text-sm font-medium border-b-2 ' + (activeTab() === 'availability' ? 'border-teal-500 text-teal-600' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300')">Availability</button>
        <button (click)="selectTab('reviews')" [class]="'px-1 py-4 text-sm font-medium border-b-2 ' + (activeTab() === 'reviews' ? 'border-teal-500 text-teal-600' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300')">Reviews</button>
      </nav>
    </div>

    <!-- Tab Content -->
    <div class="mt-6">
      @switch (activeTab()) {
        @case ('profile') {
          <div class="bg-white p-6 rounded-xl shadow-md animate-fade-in-fast">
             <!-- Business Profile Section -->
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-2xl font-bold text-slate-800">Business Profile</h2>
              @if (!isEditingProfile()) {
                <button (click)="isEditingProfile.set(true)" class="text-sm font-medium text-teal-600 hover:text-teal-800">Edit</button>
              }
            </div>
            
            @if (isEditingProfile()) {
              <form #profileForm="ngForm" (ngSubmit)="onSaveProfile()" class="space-y-4">
                 <div>
                  <label for="name" class="block text-sm font-medium text-slate-700">Business Name</label>
                  <input type="text" id="name" name="name" [(ngModel)]="provider.name" required class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500">
                </div>
                 <div>
                  <label for="location" class="block text-sm font-medium text-slate-700">Location</label>
                  <input type="text" id="location" name="location" [(ngModel)]="provider.location" required class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500">
                </div>
                <div>
                  <label for="description" class="block text-sm font-medium text-slate-700">Description</label>
                  <textarea id="description" name="description" [(ngModel)]="provider.description" rows="4" required class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500"></textarea>
                </div>

                <div>
                  <label class="block text-sm font-medium text-slate-700">Business Gallery</label>
                  <div class="mt-1 grid grid-cols-3 gap-2">
                    @for (image of provider.galleryImages; track $index) {
                      <div class="relative group">
                        <img [src]="image" alt="Gallery image" class="h-24 w-full object-cover rounded-md">
                        <button type="button" (click)="onDeleteGalleryImage($index)" title="Delete Image" class="absolute top-1 right-1 bg-black/60 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity focus:opacity-100">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                        </button>
                      </div>
                    }
                    <button type="button" (click)="onAddGalleryImage()" class="h-24 w-full flex flex-col items-center justify-center border-2 border-dashed border-slate-300 rounded-md text-slate-400 hover:border-teal-500 hover:text-teal-600 transition-colors">
                       <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                      <span class="text-xs mt-1">Add Image</span>
                    </button>
                  </div>
                </div>

                <div class="flex justify-end gap-3 pt-2">
                  <button type="button" (click)="onCancelEditProfile()" class="px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 rounded-md hover:bg-slate-200">Cancel</button>
                  <button type="submit" [disabled]="profileForm.invalid" class="px-4 py-2 text-sm font-medium text-white bg-teal-600 rounded-md hover:bg-teal-700 disabled:bg-teal-300">Save Changes</button>
                </div>
              </form>
            } @else {
              <div class="space-y-3 text-slate-700">
                <p><span class="font-semibold">Name:</span> {{ provider.name }}</p>
                <p><span class="font-semibold">Category:</span> {{ provider.category }}</p>
                <p><span class="font-semibold">Location:</span> {{ provider.location }}</p>
                <p><span class="font-semibold">Description:</span> {{ provider.description }}</p>
              </div>
              @if(provider.galleryImages && provider.galleryImages.length > 0) {
                <div class="mt-4">
                   <h4 class="font-semibold text-slate-800 mb-2">Gallery</h4>
                   <div class="grid grid-cols-3 gap-2">
                      @for (image of provider.galleryImages; track image) {
                         <img [src]="image" alt="Gallery image" class="h-24 w-full object-cover rounded-md">
                      }
                   </div>
                </div>
              }
            }
          </div>
        }
        @case ('services') {
          <div class="bg-white p-6 rounded-xl shadow-md animate-fade-in-fast">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-2xl font-bold text-slate-800">Your Services</h2>
              <button (click)="openAddServiceModal()" class="flex items-center gap-1 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 px-3 py-2 rounded-md">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" /></svg>
                Add Service
              </button>
            </div>
            <div class="space-y-3">
              @for(service of provider.services; track service.id) {
                <div class="p-4 border border-slate-200 rounded-lg flex justify-between items-start">
                    <div class="flex-grow">
                      <p class="font-semibold text-slate-800">{{ service.name }}</p>
                      <p class="text-sm text-slate-500">{{ service.description }}</p>
                       <div class="flex items-center gap-4 mt-2">
                         <p class="font-bold text-sm text-teal-700">${{ service.price }}</p>
                         <p class="text-sm text-slate-500">{{ service.durationMinutes }} min</p>
                      </div>
                    </div>
                    <div class="flex items-center gap-2 flex-shrink-0 ml-4">
                       <button (click)="openEditServiceModal(service)" title="Edit Service" class="p-2 text-slate-500 hover:text-teal-600 rounded-full hover:bg-slate-100 transition-colors">
                         <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" /><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" /></svg>
                       </button>
                       <button (click)="openDeleteServiceModal(service)" title="Delete Service" class="p-2 text-slate-500 hover:text-red-600 rounded-full hover:bg-slate-100 transition-colors">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>
                       </button>
                    </div>
                </div>
              } @empty {
                <p class="text-center text-slate-500 bg-slate-50 p-4 rounded-md">You haven't added any services yet.</p>
              }
            </div>
          </div>
        }
        @case ('workers') {
          <div class="space-y-8 animate-fade-in-fast">
            <div class="bg-white p-6 rounded-xl shadow-md">
               <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-slate-800">Manage Workers</h2>
                <button (click)="openAddWorkerModal()" class="text-sm font-medium text-teal-600 hover:text-teal-800">+ Add Worker</button>
              </div>
               <div class="space-y-3">
                @for(worker of provider.workers; track worker.id) {
                  <div class="p-3 border border-slate-200 rounded-lg flex justify-between items-center gap-2">
                      <div class="flex items-center gap-3 flex-grow">
                        <img [src]="worker.imageUrl || 'https://picsum.photos/seed/placeholder/100/100'" [alt]="worker.name" class="w-10 h-10 rounded-full object-cover">
                        <div>
                          <p class="font-semibold text-slate-800">{{ worker.name }}</p>
                          <p class="text-sm text-slate-500">{{ worker.role }}</p>
                        </div>
                      </div>
                      <div class="flex-shrink-0 flex items-center gap-1">
                         <button (click)="openEditWorkerModal(worker)" title="Edit Worker" class="p-2 text-slate-400 hover:text-teal-600 rounded-full hover:bg-slate-100 transition-colors">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" /><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" /></svg>
                        </button>
                        <button (click)="openEditWorkerServicesModal(worker)" title="Manage Services" class="p-2 text-slate-400 hover:text-teal-600 rounded-full hover:bg-slate-100 transition-colors">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1zM3 15a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z" /></svg>
                        </button>
                        <button (click)="openDeleteWorkerModal(worker)" title="Delete Worker" class="p-2 text-slate-400 hover:text-red-600 rounded-full hover:bg-slate-100 transition-colors">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>
                        </button>
                      </div>
                  </div>
                } @empty {
                  <p class="text-center text-slate-500 bg-slate-50 p-4 rounded-md">No workers have been added yet.</p>
                }
              </div>
            </div>
            <div>
              <h2 class="text-2xl font-bold text-slate-800 mb-4">Team Schedule</h2>
              <app-team-schedule [provider]="provider"></app-team-schedule>
            </div>
          </div>
        }
        @case ('availability') {
          <div class="bg-white p-6 rounded-xl shadow-md animate-fade-in-fast">
             <div class="flex justify-between items-center mb-4">
              <h2 class="text-2xl font-bold text-slate-800">Availability</h2>
               @if (!isEditingAvailability()) {
                <button (click)="isEditingAvailability.set(true)" class="text-sm font-medium text-teal-600 hover:text-teal-800">Edit Hours</button>
              }
            </div>
            <!-- Recurring Schedule -->
            <h3 class="font-semibold text-slate-800 mb-2">Weekly Schedule</h3>
            @if (isEditingAvailability()) {
              <div class="space-y-3">
                @for(day of provider.recurringAvailability; track day.dayOfWeek) {
                  <div class="grid grid-cols-4 items-center gap-2">
                    <div class="col-span-1">
                       <input type="checkbox" [id]="day.dayOfWeek" [name]="day.dayOfWeek" [(ngModel)]="day.isEnabled" class="h-4 w-4 text-teal-600 border-slate-300 rounded focus:ring-teal-500">
                       <label [for]="day.dayOfWeek" class="ml-2 text-sm font-medium text-slate-700">{{day.dayOfWeek.substring(0,3)}}</label>
                    </div>
                    <div class="col-span-3 grid grid-cols-2 gap-2">
                      <input type="time" [(ngModel)]="day.startTime" [disabled]="!day.isEnabled" class="w-full text-sm border-slate-300 rounded-md shadow-sm disabled:bg-slate-100">
                      <input type="time" [(ngModel)]="day.endTime" [disabled]="!day.isEnabled" class="w-full text-sm border-slate-300 rounded-md shadow-sm disabled:bg-slate-100">
                    </div>
                  </div>
                }
                <div class="flex justify-end gap-3 pt-2">
                  <button type="button" (click)="onCancelEditAvailability()" class="px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 rounded-md hover:bg-slate-200">Cancel</button>
                  <button (click)="onSaveAvailability()" class="px-4 py-2 text-sm font-medium text-white bg-teal-600 rounded-md hover:bg-teal-700">Save Hours</button>
                </div>
              </div>
            } @else {
               <ul class="space-y-1 text-sm text-slate-600">
                @for(day of provider.recurringAvailability; track day.dayOfWeek) {
                  @if (day.isEnabled) {
                    <li class="flex justify-between">
                      <span class="font-medium w-20">{{day.dayOfWeek}}:</span>
                      <span>{{day.startTime}} - {{day.endTime}}</span>
                    </li>
                  } @else {
                    <li class="flex justify-between text-slate-400">
                       <span class="font-medium w-20">{{day.dayOfWeek}}:</span>
                      <span>Closed</span>
                    </li>
                  }
                }
              </ul>
            }
             <!-- Blocked Time -->
            <div class="mt-6">
               <div class="flex justify-between items-center mb-2">
                  <h3 class="font-semibold text-slate-800">Time Off / Blocked</h3>
                  <button (click)="openBlockTimeModal()" class="text-sm font-medium text-teal-600 hover:text-teal-800">+ Block Time</button>
                </div>
                <div class="space-y-2">
                  @for(block of provider.blockedTimes; track block.id) {
                     <div class="p-2 bg-slate-100 rounded-md text-sm">
                       <p class="font-semibold text-slate-700">{{ block.reason || 'Blocked' }}</p>
                       <p class="text-xs text-slate-500">{{ block.startTime | date:'short' }} to {{ block.endTime | date:'short' }}</p>
                     </div>
                  } @empty {
                      <p class="text-center text-sm text-slate-400 bg-slate-50 py-3 rounded-md">No time off scheduled.</p>
                  }
                </div>
            </div>
          </div>
        }
         @case ('reviews') {
          <div class="space-y-8 animate-fade-in-fast">
             <!-- Overall Rating -->
             <div class="bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-2xl font-bold text-slate-800 mb-2">Overall Rating</h2>
                 <div class="flex items-center gap-2">
                    <span class="text-4xl font-extrabold text-slate-800">{{ provider.rating > 0 ? provider.rating : 'N/A' }}</span>
                    <div class="flex items-center">
                        @for (star of [1,2,3,4,5]; track star) {
                          <svg [class]="'h-6 w-6 ' + (provider.rating >= star ? 'text-yellow-400' : 'text-slate-300')" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.955a1 1 0 00.95.69h4.162c.969 0 1.371 1.24.588 1.81l-3.368 2.448a1 1 0 00-.364 1.118l1.287 3.955c.3.921-.755 1.688-1.54 1.118l-3.368-2.448a1 1 0 00-1.175 0l-3.368 2.448c-.784.57-1.838-.197-1.539-1.118l1.287-3.955a1 1 0 00-.364-1.118L2.064 9.382c-.784-.57-.38-1.81.588-1.81h4.162a1 1 0 00.95-.69L9.049 2.927z"></path></svg>
                        }
                    </div>
                    <span class="text-slate-500">based on {{ reviewsForProvider().length }} reviews</span>
                 </div>
             </div>

             <!-- Ratings by Worker -->
             @if (provider.workers && provider.workers.length > 0) {
              <div class="bg-white p-6 rounded-xl shadow-md">
                  <h2 class="text-2xl font-bold text-slate-800 mb-4">Feedback by Worker</h2>
                  <div class="space-y-4">
                      @for(item of reviewsByWorker(); track item.worker.id) {
                          <div>
                              <div class="flex items-center gap-3">
                                  <img [src]="item.worker.imageUrl" [alt]="item.worker.name" class="w-10 h-10 rounded-full object-cover">
                                  <div>
                                      <p class="font-bold text-slate-800">{{ item.worker.name }}</p>
                                      <div class="flex items-center gap-1">
                                          <svg class="h-4 w-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.955a1 1 0 00.95.69h4.162c.969 0 1.371 1.24.588 1.81l-3.368 2.448a1 1 0 00-.364 1.118l1.287 3.955c.3.921-.755 1.688-1.54 1.118l-3.368-2.448a1 1 0 00-1.175 0l-3.368 2.448c-.784.57-1.838-.197-1.539-1.118l1.287-3.955a1 1 0 00-.364-1.118L2.064 9.382c-.784-.57-.38-1.81.588-1.81h4.162a1 1 0 00.95-.69L9.049 2.927z"></path></svg>
                                          <span class="font-semibold">{{ item.worker.rating || 'N/A' }}</span>
                                          <span class="text-sm text-slate-500"> ({{ item.reviews.length }} reviews)</span>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      }
                  </div>
              </div>
             }

             <!-- All Reviews List -->
             <div class="bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-2xl font-bold text-slate-800 mb-4">All Reviews</h2>
                <div class="space-y-4 max-h-96 overflow-y-auto pr-2">
                  @for(review of reviewsForProvider(); track review.id) {
                    <div class="border-t border-slate-200 pt-4">
                      <div class="flex items-center justify-between">
                        <div class="flex items-center">
                          @for (star of [1,2,3,4,5]; track star) {
                            <svg [class]="'h-5 w-5 ' + (review.rating >= star ? 'text-yellow-400' : 'text-slate-300')" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.955a1 1 0 00.95.69h4.162c.969 0 1.371 1.24.588 1.81l-3.368 2.448a1 1 0 00-.364 1.118l1.287 3.955c.3.921-.755 1.688-1.54 1.118l-3.368-2.448a1 1 0 00-1.175 0l-3.368 2.448c-.784.57-1.838-.197-1.539-1.118l1.287-3.955a1 1 0 00-.364-1.118L2.064 9.382c-.784-.57-.38-1.81.588-1.81h4.162a1 1 0 00.95-.69L9.049 2.927z"></path></svg>
                          }
                        </div>
                        <span class="text-xs text-slate-400">{{ review.date | date:'mediumDate' }}</span>
                      </div>
                      <p class="mt-2 text-slate-600 text-sm">"{{ review.comment }}"</p>
                      <p class="mt-2 text-xs text-slate-500 font-medium">
                        - {{ review.userName }} 
                        @if(review.workerName) {
                          <span class="text-slate-400">(for {{ review.workerName }})</span>
                        }
                      </p>
                    </div>
                  } @empty {
                    <p class="text-sm text-slate-500 text-center bg-slate-50 py-4 rounded-md">No reviews yet.</p>
                  }
                </div>
            </div>
          </div>
        }
      }
    </div>
  }

  <!-- MODALS for forms -->
  <!-- Add Service Modal -->
  @if(isAddingService()) {
    <div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-fade-in-fast">
      <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg p-6">
        <h3 class="font-semibold text-lg mb-3 text-slate-800">Add a New Service</h3>
        <form #serviceForm="ngForm" (ngSubmit)="onSaveNewService()" class="space-y-4">
            <div>
                <label for="serviceName" class="block text-sm font-medium text-slate-700">Service Name</label>
                <input type="text" id="serviceName" name="serviceName" [(ngModel)]="newService().name" required class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500">
            </div>
             <div>
                <label for="serviceDesc" class="block text-sm font-medium text-slate-700">Description</label>
                <input type="text" id="serviceDesc" name="serviceDesc" [(ngModel)]="newService().description" class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500">
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label for="duration" class="block text-sm font-medium text-slate-700">Duration (min)</label>
                    <input type="number" id="duration" name="duration" [(ngModel)]="newService().durationMinutes" required min="1" class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500">
                </div>
                <div>
                    <label for="price" class="block text-sm font-medium text-slate-700">Price ($)</label>
                    <input type="number" id="price" name="price" [(ngModel)]="newService().price" required min="0" class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-teal-500">
                </div>
            </div>
            <div class="flex justify-end gap-3 pt-2">
                <button type="button" (click)="isAddingService.set(false)" class="px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 rounded-md hover:bg-slate-200">Cancel</button>
                <button type="submit" [disabled]="serviceForm.invalid" class="px-4 py-2 text-sm font-medium text-white bg-teal-600 rounded-md hover:bg-teal-700 disabled:bg-teal-300">Add Service</button>
            </div>
        </form>
      </div>
    </div>
  }
  
  <!-- All other modals from previous implementation -->
  <!-- ... (edit service, delete service, add worker, edit worker, delete worker, worker services, block time) -->
</div>